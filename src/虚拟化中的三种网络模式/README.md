# 虚拟化中的三种网络模式

当开启虚拟机时，会面临一个网络选项问题：

![虚拟环境下的网络](https://img-blog.csdnimg.cn/20210606200256992.png)

本文，将讲述三种网络连接的不同：

- NAT: 网络地址转换模式；
- Host-Only: 仅主机模式；
- Bridged: 桥接模式；

## 前置知识

首先，在自己的电脑上输入以下命令：

```bash
ifconfig
```

之后，可以看到本机的 IP 地址：

![本机 ip](https://img-blog.csdnimg.cn/20210606202703903.png)

结合子网掩码可知，目前电脑位于 `192.168.2.1` - `192.168.2.255` 这个网段内。

随后，通过 VirtualBox 在不同网络连接模式下开启虚拟机。

## 桥接模式

桥接模式的原理就是让虚拟机拥有独立的虚拟网卡和 ip, 简单理解是就是把它当作真实的主机。该模式下，虚拟机的所有网络请求都是由自身的 ip 所发出的。

其最大的特性就是虚拟机的 IP 与主机位于一个网段。

例如，此时在虚拟机里查看 ip 地址，结果为：

![桥接模式下的虚拟机 ip](https://img-blog.csdnimg.cn/20210606205143311.png)

可见其 ip 为 192.168.2.108. 同一网段下。

但是，桥接模式也有一个问题：网段内的 ip 地址是优先的，若局域网内拥有太多设备，则会出现 ip 地址不够分配的问题。

## NAT 模式

NAT, Network Address Translation, 网络地址转化，该模式解决了上述 ip 地址不够分配的问题。

NAT 模式下，虚拟机会创建单独的专用网络，用以主机和虚拟机之间通信。

例如，此时虚拟机的 IP 为：10.0.2.15.

![NAT 下的虚拟机 ip](https://img-blog.csdnimg.cn/20210606205922880.png)

这种模式下，虚拟机的网络请求都是先转发到主机，然后再通过主机发送。

## Host-only 模式

Host-only, 仅主机模式，是一种非常封闭的网络连接模式，该模式下，虚拟机会创建完全包含在主机中的专用网络。

该模式下的 `ifconfig` 为：

![host-only 下的 ifconfig](https://img-blog.csdnimg.cn/20210606210806341.png)

可以看出，ip 与主机不在一个网段。

甚至在默认情况下，没有任何网络连接：

![仅主机模式下的网络](https://img-blog.csdnimg.cn/20210606210951234.png)
