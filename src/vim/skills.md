# Vim 技巧

[TOC]

## 使用 Vim 的出厂配置

Vim 是高度可配置的，但为了从零开始，我们还是用出厂配置来学习 vim.

其命令如下：

```bash
vim -u NONE -N
```

其中：

- 参数 `-u NONE` 让 Vim 启动时不加载 *.vimrc* 文件。而 *.vimrc* 是 Vim 的配置文件，因此该参数保证了定制项和插件被禁用。
- 参数 `-N` 指 'nocompatible', 用于防止进入 vi 兼容模式。

## Vim 的三种工作模式

```txt
  进入文件时                输入 ZZ 退出
  -------------------|   |------------->
                     |   |
                    \/   |
   |-------------- 命令模式  <---------- |
   | 输入 i, a, o 等  /\  | 回车         |
   |                 |   |             |
   \/        ESC     |   |  按下 ':'    |
  输入模式  ----------|    |-------> 编辑模式

```

## 删除光标下的字符

对于文本：

```txt
This is a line.
```

在**命令模式**下, 将光标落在需要删除的字符上，按下 `x` 键，则会将当前字符删除。

例如，当光标落在 `T` 处，按下 `x` 键，其结果变为

```txt
his is a line.
```

## 删除 n 个字符

还是上述文本：

```txt
This is a line
```

在**命令模式下**，若光标落在 `T` 处，依次按下 `5x`, 其结果变为

```txt
is a line
```

即：当依次按下 `n` 和 `x` 时，会删除 n 个字符。

*这种组合键具有通用性。*

## 重复执行上次操作

对于文本：

```txt
is a line
```

假设我们上次输入的命令为：`5x`, 则此时光标会落在 `i` 处，此时，在**命令模式**下输入 `.`, 则会重复执行上次的命令，其结果为：

```txt
line
```

## 删除当前行

逐个删除字符太慢，删除多个字符要算。因此介绍删除当前行的命令：`dd`.

假设当前文本内容如下：

```txt
aline one
bline two
```

在**命令模式**下，若当前光标落在 `a` 处，依次按下 `dd`, 则执行后的文本变为：

```txt
bline two
```

## 撤销操作

假如我们误触命令，则需要 `u` 来撤销上次修改。 例如 `dd` 后，再按下 `u`, 其文本恢复为：

```txt
aline one
bline two
```

## 给文档以层级

对于文本：

```txt
task1
a. subtask1
b. subtask2
c. subtask3
```

可以使用 `>G` 命令来使层级更明确，在**命令模式**下，假设此时光标落在 `a` 处，输入 `>G` 之后，当前行到末尾处都会有一个缩进，即效果为：

```txt
task1
  a. subtask1
  b. subtask2
  c. subtask3
```

*注意区分大小写，是 `>G` 而**不是**`>g`.*

## 上下左右移动

在**命令模式**下

- h/backspace
- j
- k
- l/space

## 命令 i, a, o 的区别

对于文本

```txt
This is a line.
```

若光标落在字符 `e` 上时，若按下 `i`, `a`, `o`, 均会进入插入模式，但是初始时效果有所不同：

- `i` 命令，进入插入模式，光标落在 `e` **之前**。
- `a` 命令，进入插入模式，光标落在 `e` **之后**。
- `o` 命令，进入插入模式，新建一行，光标落在新建一行的头部。

## 将落在某一个字符上

## 复制 `yy`

## 粘贴 `p`

## 撤销 `u`
